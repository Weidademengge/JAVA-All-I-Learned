## 最常用命令

### grep ⭐️⭐️⭐️⭐️⭐️

grep是linux下一个强大的文本搜索工具，可以支持正则，并打印出匹配的内容

基本使用方式：

```bash
grep [options] pattern [file]

// 打印app.log中所有带fatal的日志
grep "fatal" app.log
// 查找多个关键字
grep -E "key1|key2" app.log
// 打印所有带“fatal”的日志，并额外显示后三行
grep -A 3 "fatal" app.log
// 计算符合关键字的列数
grep -c "fatal" app.log
// 匹配所有.conf文件中带数字的行 
grep -E "[0-9]+" . -r -n --include *.conf
```

  

常用参数：

![[Pasted image 20230406170559.png]]

同时查找带有**多个关键字的日志**，符合其一就打印出来，关键字之间是“或”的关系，这种情况不能省略双引号！！！

grep -E "fatal丨error" app.log 由于格式问题，此处的“｜”用中文gun替代，实际上是管道符“｜”请读者注意

### 文件编辑vim ⭐️⭐️⭐️⭐️⭐️

● Ctrl+u：向文件首翻半屏；

● Ctrl+d：向文件尾翻半屏；

● Ctrl+f：向文件尾翻一屏；

● Ctrl+b：向文件首翻一屏；

● Esc：从编辑模式切换到命令模式；

● ZZ：命令模式下保存当前文件所做的修改后退出vi；

● :行号：光标跳转到指定行的行首；

● :$：光标跳转到最后一行的行首；

● x或X：删除一个字符，x删除光标后的，而X删除光标前的；

● D：删除从当前光标到光标所在行尾的全部字符；

● dd：删除光标行正行内容；

● ndd：删除当前行及其后n-1行；

● nyy：将当前行及其下n行的内容保存到寄存器？中，其中？为一个字母，n为一个数字；

● p：粘贴文本操作，用于将缓存区的内容粘贴到当前光标所在位置的下方；

● P：粘贴文本操作，用于将缓存区的内容粘贴到当前光标所在位置的上方；

● /字符串：文本查找操作，用于从当前光标所在位置开始向文件尾部查找指定字符串的内容，查找的字符串会被加亮显示；

● ？name：文本查找操作，用于从当前光标所在位置开始向文件头部查找指定字符串的内容，查找的字符串会被加亮显示；

● a，bs/F/T：替换文本操作，用于在第a行到第b行之间，将F字符串换成T字符串。其中，“s/”表示进行替换操作；

● a：在当前字符后添加文本；

● A：在行末添加文本；

● gg：移动光标到首行

● G：移动光标到末行

● i：在当前字符前插入文本；

● I：在行首插入文本；

● o：在当前行后面插入一空行；

● O：在当前行前面插入一空行；

● u（undo）：撤销

● :wq：在命令模式下，执行保存后退出操作；

● :w：在命令模式下，执行存盘操作；

● :w！：在命令模式下，执行强制存盘操作；

● :q：在命令模式下，执行退出vi操作；

● :q！：在命令模式下，执行强制退出vi操作；

● :e文件名：在命令模式下，打开并编辑指定名称的文件；

● :n：在命令模式下，如果同时打开多个文件，则继续编辑下一个文件；

● :f：在命令模式下，用于显示当前的文件名、光标所在行的行号以及显示比例；

● :set number：在命令模式下，用于在最左端显示行号；

● :set nonumber：在命令模式下，用于在最左端不显示行号

### tail ⭐️⭐️⭐️⭐️

监视文件末尾日志，实时滚动

```bash
tail [必要参数] 选择参数 [file]
-f --follow 表示持续监测后面所接的文档名,直到按下ctrl c才会结束tail的监测
-v --verbase 输出给出文件名的首部
-c,--byte=K 输出最后的K个字节数的内容;或使用-c +k输出每一行的K个字节数的内容
-n,--line=K 输出最后的K行,默认输出10行.或使用-n +K 输出从第K行开始的内容
--pid=PID 与-f合用,表示在进程ID-PID结束之后也结束
-q --quiet --slient 从不输出给出文件名的首部 

// 查询日志尾部最后10行的日志;
tail  -n  10   app.log   
// 查询10行之后的所有日志;
tail  -n +10   app.log   
// 实时查看最后10行记录(最常用的)
tail  -fn 10   app.log   

//配合grep进行使用
tail -fn 100 test.log | grep '关键字'
```

常用参数：

![[Pasted image 20230406170657.png]]

退出tail -f：ctrl+c

### head ⭐️⭐️

与tail相反的命令

```bash
head [必要参数] 选择参数 [file]
-c, --bytes=[-]K 输出文件的前K个字节；如果有-参数，输出文件的所有内容但不包含最后K个字节。
-n, --lines=[-]K 输出文件的前K行，默认输出前10行；如果有-参数，则输出所有内容但不包括最后K行。
-q, --quiet, --slient 从不输出给出文件名的首部 

// 查询日志头部前10行的日志;
head  -n  10   app.log 
```
### cat ⭐️⭐️

打印文件所有文本到屏幕上

```bash
cat [file]

// 打印app.log所有文本
cat app.log
// 统计日志文件中包含某个关键词的数量
cat webx.log | grep keyword | wc -l 
```

### less ⭐️⭐️

查看日志、全局搜索

基本使用方式：

```bash
// 打印文件,一屏显示不下可以按空格继续查看下一屏
less app.log
// 命令到文件尾部  然后输入 ？加上你要搜索的关键字例如 ？123
按 n 向上查找关键字
shift + G
// 反向查找关键字;
shift+n
```

## 其它命令：

### 进程 ⭐️⭐️⭐️

● 强制杀死Java进程：sudo kill -9 pid

● 查看进程：ps -ef | grep java

### 文件系统 ⭐️⭐️⭐️

● 查看文件系统大小（m是单位MB）：df -m

● 删除文件：rm application.log

● 删除文件夹：rmdir dir

### 机器操作 ⭐️

● 重启：sudo reboot

## 资源概览 ⭐️⭐️⭐️

● 查看系统资源整体状态（CPU/内存/进程等）：top